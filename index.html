<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ProPlan | Business Strategy Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <style>
      body { font-family: "Inter", sans-serif; background: linear-gradient(180deg, #f8fafc, #e2e8f0); min-height: 100vh; }
      .step-content { display: none; }
      .step-content.active { display: block; }
      .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(12px); }
      .input { width: 100%; padding: 0.8rem; border-radius: 0.6rem; border: 1px solid #cbd5e1; margin-bottom: 1rem; }
      .input:focus { outline: none; border-color: #6366f1; box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1); }
      label { font-size: 0.75rem; font-weight: 700; text-transform: uppercase; color: #475569; margin-bottom: 0.3rem; display: block; }
      .dot-active { background-color: #6366f1 !important; width: 1.5rem !important; }
    </style>
  </head>
  <body class="py-12 px-4">
    <div class="max-w-4xl mx-auto">
      <header class="flex justify-between items-end mb-8">
        <div>
          <h1 class="text-3xl font-black text-slate-900">Pro<span class="text-indigo-600">Plan</span></h1>
          <p class="text-slate-500">Professional Business Strategy Builder</p>
        </div>
        <div class="text-right">
          <span id="step-counter" class="text-xs font-bold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full">Step 1 of 6</span>
          <div id="step-dots" class="flex gap-1 mt-2 justify-end"></div>
        </div>
      </header>

      <form id="planForm" class="glass rounded-2xl shadow-xl border border-slate-200 overflow-hidden">
        <div class="h-1.5 bg-slate-100">
          <div id="progress-bar" class="h-full bg-indigo-600 transition-all duration-500" style="width: 16.6%"></div>
        </div>

        <div class="p-8">
          <div class="step-content active" data-step="1">
            <h2 class="text-xl font-bold mb-4">Executive Identity</h2>
            <label>Business Name</label><input name="bizName" class="input" placeholder="e.g. Acme Corp">
            <label>Mission Statement</label><textarea name="mission" class="input" rows="3"></textarea>
          </div>

          <div class="step-content" data-step="2">
            <h2 class="text-xl font-bold mb-4">Product & Service</h2>
            <label>What do you sell?</label><textarea name="prodDesc" class="input" rows="3"></textarea>
            <label>Unique Value Proposition</label><input name="usp" class="input">
          </div>

          <div class="step-content" data-step="3">
            <h2 class="text-xl font-bold mb-4">Marketing</h2>
            <label>Pricing Strategy</label><input name="pricing" class="input">
            <label>Promotion Plan</label><textarea name="promotion" class="input" rows="3"></textarea>
          </div>

          <div class="step-content" data-step="4">
            <h2 class="text-xl font-bold mb-4">Operations</h2>
            <label>Key Infrastructure</label><textarea name="tools" class="input" rows="3"></textarea>
          </div>

          <div class="step-content" data-step="5">
            <h2 class="text-xl font-bold mb-4">Management</h2>
            <label>Leadership Team</label><textarea name="team" class="input" rows="3"></textarea>
          </div>

          <div class="step-content" data-step="6">
            <h2 class="text-xl font-bold mb-4">Financials</h2>
            <label>Startup Costs</label><input name="costStartup" class="input" placeholder="$">
            <label>Financial Outlook</label><textarea name="profitAnalysis" class="input" rows="3"></textarea>
          </div>

          <div class="flex justify-between items-center mt-8 pt-6 border-t">
            <button id="prevBtn" type="button" class="invisible text-slate-400 font-bold hover:text-slate-600">Back</button>
            <div class="flex gap-4">
              <button id="nextBtn" type="button" class="bg-slate-900 text-white px-8 py-3 rounded-xl font-bold hover:bg-slate-800 transition-all">Next Step</button>
              <button id="submitBtn" type="button" class="hidden bg-indigo-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-indigo-700 transition-all shadow-lg">Generate PDF</button>
            </div>
          </div>
        </div>
      </form>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        let currentStep = 1;
        const totalSteps = 6;

        const planForm = document.getElementById('planForm');
        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');
        const submitBtn = document.getElementById('submitBtn');
        const progressBar = document.getElementById('progress-bar');
        const stepCounter = document.getElementById('step-counter');
        const dotsContainer = document.getElementById('step-dots');

        // Create dots
        for (let i = 1; i <= totalSteps; i++) {
          const dot = document.createElement('div');
          dot.className = "h-1 w-4 rounded-full bg-slate-200 transition-all";
          dot.id = `dot-${i}`;
          dotsContainer.appendChild(dot);
        }

        function updateUI() {
          // Update steps visibility
          document.querySelectorAll('.step-content').forEach(step => {
            step.classList.toggle('active', parseInt(step.dataset.step) === currentStep);
          });

          // Update progress bar & text
          progressBar.style.width = (currentStep / totalSteps * 100) + '%';
          stepCounter.innerText = `Step ${currentStep} of ${totalSteps}`;

          // Update buttons
          prevBtn.style.visibility = currentStep === 1 ? 'hidden' : 'visible';
          
          if (currentStep === totalSteps) {
            nextBtn.classList.add('hidden');
            submitBtn.classList.remove('hidden');
          } else {
            nextBtn.classList.remove('hidden');
            submitBtn.classList.add('hidden');
          }

          // Update dots
          for (let i = 1; i <= totalSteps; i++) {
            const dot = document.getElementById(`dot-${i}`);
            dot.classList.toggle('dot-active', i === currentStep);
          }
        }

        nextBtn.addEventListener('click', () => {
          if (currentStep < totalSteps) {
            currentStep++;
            updateUI();
            window.scrollTo(0, 0);
          }
        });

        prevBtn.addEventListener('click', () => {
          if (currentStep > 1) {
            currentStep--;
            updateUI();
          }
        });

        submitBtn.addEventListener('click', () => {
          const { jsPDF } = window.jspdf;
          const doc = new jsPDF();
          const formData = new FormData(planForm);
          const data = Object.fromEntries(formData.entries());

          doc.setFontSize(22);
          doc.text(data.bizName || "Business Plan", 20, 20);
          doc.setFontSize(12);
          doc.text("Generated via ProPlan Strategy Builder", 20, 30);
          
          let y = 50;
          Object.entries(data).forEach(([key, value]) => {
            if (y > 270) { doc.addPage(); y = 20; }
            doc.setFont(undefined, 'bold');
            doc.text(key.toUpperCase() + ":", 20, y);
            doc.setFont(undefined, 'normal');
            const splitText = doc.splitTextToSize(value || "N/A", 170);
            doc.text(splitText, 20, y + 7);
            y += (splitText.length * 7) + 15;
          });

          doc.save("My_Business_Plan.pdf");
        });

        updateUI(); // Initialize UI
      });
    </script>
  </body>
</html>
